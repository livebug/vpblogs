---
title: VSCode 插件开发 第三课  语言服务器LSP
tags:
  - 标签
---
# VSCode 插件开发 第三课 语言服务器LSP

## Extension Manifest 扩展清单文件

每个 Visual Studio Code 扩展都需要一个清单文件 `package.json` 位于扩展目录结构的根目录下。

| Name                                                                                 | Required | Type                                                  | Details                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |     |
| ------------------------------------------------------------------------------------ | -------- | ----------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | --- |
| `name`                                                                               | Y        | `string`                                              | The name of the extension - should be all lowercase with no spaces.  <br>==扩展名 - 应全部为小写，无空格。==  <br>The name must be unique to the Marketplace.  <br>==该名称对于 Marketplace 必须是唯一的。==                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |     |
| `version`                                                                            | Y        | `string`                                              | [SemVer](https://semver.org/) compatible version.  <br>==[SemVer](https://semver.org/) 兼容版本。语义化版本==<br>==版本格式：主版本号.次版本号.修订号，版本号递增规则如下：==<br><br>==1. 主版本号：当你做了不兼容的 API 修改，==<br>==2. 次版本号：当你做了向下兼容的功能性新增，==<br>==3. 修订号：当你做了向下兼容的问题修正。==<br><br>==先行版本号及版本编译信息可以加到“主版本号.次版本号.修订号”的后面，作为延伸。==<br>                                                                                                                                                                                                                                                                                                                                                                                                             |     |
| `publisher`                                                                          | Y        | `string`                                              | The [publisher identifier](https://code.visualstudio.com/api/working-with-extensions/publishing-extension#publishing-extensions)<br>[出版商标识符](https://code.visualstudio.com/api/working-with-extensions/publishing-extension#publishing-extensions)                                                                                                                                                                                                                                                                                                                                                                                                                                                           |     |
| `engines`                                                                            | Y        | `object`                                              | An object containing at least the `vscode` key matching the versions of VS Code that the extension is [compatible](https://code.visualstudio.com/api/working-with-extensions/publishing-extension#visual-studio-code-compatibility) with. Cannot be `*`. For example: `^0.10.5` indicates compatibility with a minimum VS Code version of `0.10.5`.<br>==至少包含与扩展[兼容的](https://code.visualstudio.com/api/working-with-extensions/publishing-extension#visual-studio-code-compatibility) VS Code 版本的 `vscode` 键的对象。不能为 `*`。例如：`^0.10.5` 表示与最低 VS Code 版本 `0.10.5` 兼容。==                                                                                                                                        |     |
| `license`                                                                            |          | `string`                                              | Refer to [npm's documentation](https://docs.npmjs.com/cli/v7/configuring-npm/package-json#license). If you do have a `LICENSE` file in the root of your extension, the value for `license` should be `"SEE LICENSE IN <filename>"`.<br>请参阅 [npm 的文档](https://docs.npmjs.com/cli/v7/configuring-npm/package-json#license) 。如果扩展的根目录中确实有 `LICENSE` 文件， `则 license` 的值应为 `“SEE LICENSE IN <filename>”。`                                                                                                                                                                                                                                                                                                         |     |
| `displayName`                                                                        |          | `string`                                              | The display name for the extension used in the Marketplace.  <br>Marketplace 中使用的扩展的显示名称。  <br>The display name must be unique to the Marketplace.  <br>显示名称对于 Marketplace 必须是唯一的。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |     |
| `description`                                                                        |          | `string`                                              | A short description of what your extension is and does.  <br>扩展是什么和做什么的简短描述。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |     |
| `categories`                                                                         |          | `string[]`                                            | The categories you want to use for the extensions. Allowed values: `[Programming Languages, Snippets, Linters, Themes, Debuggers, Formatters, Keymaps, SCM Providers, Other, Extension Packs, Language Packs, Data Science, Machine Learning, Visualization, Notebooks, Education, Testing]`<br>要用于扩展的类别。允许的值： `[Programming Languages, Snippets, Linters, Themes, Debuggers, Formatters, Keymaps, SCM Providers, Other, Extension Packs, Language Packs, Data Science, Machine Learning, Visualization, Notebooks, Education, Testing]`                                                                                                                                                                     |     |
| `keywords`                                                                           |          | `array`                                               | An array of **keywords** to make it easier to find the extension. These are included with other extension **Tags** on the Marketplace. This list is currently limited to 5 keywords.<br>一个**关键字**数组，以便更轻松地找到扩展。这些包含在 Marketplace 上的其他扩展**标记**中。此列表目前限制为 5 个关键字。                                                                                                                                                                                                                                                                                                                                                                                                                                              |     |
| `galleryBanner`                                                                      |          | `object`                                              | Helps format the Marketplace header to match your icon. See details below.<br>帮助设置 Marketplace 标头的格式以匹配您的图标。请参阅下面的详细信息。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |     |
| `preview`                                                                            |          | `boolean`                                             | Sets the extension to be flagged as a Preview in the Marketplace.<br>将扩展设置为在 Marketplace 中标记为 Preview。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |     |
| `main`                                                                               |          | `string`                                              | The entry point to your extension.<br>==扩展的入口点。==                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |     |
| `browser`                                                                            |          | `string`                                              | The entry point to your [Web extension](https://code.visualstudio.com/api/extension-guides/web-extensions).<br>[Web 扩展](https://code.visualstudio.com/api/extension-guides/web-extensions)的入口点。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |     |
| [`contributes`](https://code.visualstudio.com/api/references/contribution-points)    |          | `object`                                              | An object describing the extension's [contributions](https://code.visualstudio.com/api/references/contribution-points).<br>==描述扩展[贡献](https://code.visualstudio.com/api/references/contribution-points)的对象。==                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |     |
| [`activationEvents`](https://code.visualstudio.com/api/references/activation-events) |          | `array`                                               | An array of the [activation events](https://code.visualstudio.com/api/references/activation-events) for this extension.<br>==此扩展的[激活事件](https://code.visualstudio.com/api/references/activation-events)数组。==                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |     |
| `badges`                                                                             |          | `array`                                               | Array of [approved](https://code.visualstudio.com/api/references/extension-manifest#approved-badges) badges to display in the sidebar of the Marketplace's extension page. Each badge is an object containing 3 properties: `url` for the badge's image URL, `href` for the link users will follow when clicking the badge and `description`.<br>要在 Marketplace 扩展页面的侧边栏中显示的[已批准](https://code.visualstudio.com/api/references/extension-manifest#approved-badges)徽章数组。每个徽章都是一个包含 3 个属性的对象：`url` 表示徽章的图像 `URL，href` 表示用户单击徽章时将遵循的链接，以及`描述` 。                                                                                                                                                                 |     |
| `markdown`                                                                           |          | `string`                                              | Controls the Markdown rendering engine used in the Marketplace. Either `github` (default) or `standard`.<br>控制 Marketplace 中使用的 Markdown 渲染引擎。`github` （默认） 或 `standard` 。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |     |
| `qna`                                                                                |          | `marketplace`<br>(default), <br>`string`, <br>`false` | Controls the **Q & A** link in the Marketplace. Set to `marketplace` to enable the default Marketplace Q & A site. Set to a string to provide the URL of a custom Q & A site. Set to `false` to disable Q & A altogether.<br>控制市场中的**问答**链接。设置为`市场`以启用默认的市场问答网站。设置为字符串以提供自定义问答网站的 URL。设置为 `false` 将完全禁用 Q&A。                                                                                                                                                                                                                                                                                                                                                                                                 |     |
| `sponsor`                                                                            |          | `object`                                              | Specify the location from where users can sponsor your extension. This is an object with a single property `url`, which links to a page where users can sponsor your extension.<br>指定用户可以赞助您的扩展的位置。这是一个具有单个属性 url 的对象，该 `url` 链接到用户可以赞助扩展的页面。                                                                                                                                                                                                                                                                                                                                                                                                                                                                |     |
| `dependencies`                                                                       |          | `object`                                              | Any runtime Node.js dependencies your extensions needs. Exactly the same as [npm's `dependencies`](https://docs.npmjs.com/cli/v7/configuring-npm/package-json#dependencies).<br>扩展所需的任何运行时 Node.js 依赖项。与 [npm 的`依赖项`](https://docs.npmjs.com/cli/v7/configuring-npm/package-json#dependencies)完全相同。                                                                                                                                                                                                                                                                                                                                                                                                          |     |
| `devDependencies`                                                                    |          | `object`                                              | Any development Node.js dependencies your extension needs. Exactly the same as [npm's `devDependencies`](https://docs.npmjs.com/cli/v7/configuring-npm/package-json#devdependencies).<br>扩展所需的任何开发 Node.js 依赖项。与 [npm 的 `devDependencies`](https://docs.npmjs.com/cli/v7/configuring-npm/package-json#devdependencies) 完全相同。                                                                                                                                                                                                                                                                                                                                                                                 |     |
| `extensionPack`                                                                      |          | `array`                                               | An array with the ids of extensions that can be installed together. The id of an extension is always `${publisher}.${name}`. For example: `vscode.csharp`.<br>一个数组，其中包含可以一起安装的扩展的 ID。扩展的 ID 始终为 `${publisher}.${name}`。例如：`vscode.csharp`。                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |     |
| `extensionDependencies`                                                              |          | `array`                                               | An array with the ids of extensions that this extension depends on. The id of an extension is always `${publisher}.${name}`. For example: `vscode.csharp`.<br>一个数组，其中包含此扩展所依赖的扩展的 ID。扩展的 ID 始终为 `${publisher}.${name}`。例如：`vscode.csharp`。                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |     |
| `extensionKind`                                                                      |          | `array`                                               | An array that indicates where the extension should run in remote configurations. Values are `ui` (run locally), `workspace` (run on remote machine) or both, with the order setting the preference. For example: `[ui, workspace]` indicates the extension can run in either location but prefers to run on the local machine. See [here](https://code.visualstudio.com/api/advanced-topics/extension-host#preferred-extension-location) for more details.<br>一个数组，指示扩展应在远程配置中运行的位置。值为 `ui` （本地运行） 、 `workspace` （在远程计算机上运行） 或两者，顺序设置为首选项。例如：`[ui， workspace]` 表示扩展可以在任一位置运行，但更喜欢在本地计算机上运行。有关更多详细信息，请参阅[此处](https://code.visualstudio.com/api/advanced-topics/extension-host#preferred-extension-location) 。 |     |
| `scripts`                                                                            |          | `object`                                              | Exactly the same as [npm's `scripts`](https://docs.npmjs.com/misc/scripts) but with extra VS Code specific fields such as [vscode:prepublish](https://code.visualstudio.com/api/working-with-extensions/publishing-extension#prepublish-step) or [vscode:uninstall](https://code.visualstudio.com/api/references/extension-manifest#extension-uninstall-hook).<br>与 [npm 的`脚本`](https://docs.npmjs.com/misc/scripts)完全相同，但具有额外的 VS Code 特定字段，例如 [vscode：prepublish](https://code.visualstudio.com/api/working-with-extensions/publishing-extension#prepublish-step) 或 [vscode：uninstall](https://code.visualstudio.com/api/references/extension-manifest#extension-uninstall-hook)。                          |     |
| `icon`                                                                               |          | `string`                                              | The path to the icon of at least 128x128 pixels (256x256 for Retina screens).<br>图标的路径至少为 128x128 像素（对于 Retina 屏幕为 256x256）。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |     |
| `pricing`                                                                            |          | `string`                                              | The pricing information for the extension. Allowed values: `Free`, `Trial`. Default: `Free`. See [here](https://code.visualstudio.com/api/working-with-extensions/publishing-extension#extension-pricing-label) for more details.<br>扩展的定价信息。允许的值： `Free`、 `Trial`。默认值：`Free`。有关更多详细信息，请参阅[此处](https://code.visualstudio.com/api/working-with-extensions/publishing-extension#extension-pricing-label) 。                                                                                                                                                                                                                                                                                                     |     |
| `capabilities`                                                                       |          | `object`                                              | An object describing the extension's capabilities in limited workspaces: [`untrustedWorkspaces`](https://code.visualstudio.com/api/extension-guides/workspace-trust#static-declarations), [`virtualWorkspaces`](https://code.visualstudio.com/api/extension-guides/virtual-workspaces#signal-whether-your-extension-can-handle-virtual-workspaces).<br>描述扩展在有限工作区中的功能的对象：[`untrustedWorkspaces`](https://code.visualstudio.com/api/extension-guides/workspace-trust#static-declarations)、[`virtualWorkspaces`](https://code.visualstudio.com/api/extension-guides/virtual-workspaces#signal-whether-your-extension-can-handle-virtual-workspaces)。                                                           |     |

Also check [npm's `package.json` reference](https://docs.npmjs.com/cli/v7/configuring-npm/package-json).


### Contribution Points 描述扩展
[贡献点 | Visual Studio Code 扩展 API --- Contribution Points | Visual Studio Code Extension API](https://code.visualstudio.com/api/references/contribution-points)


#### [contributes.configuration](https://code.visualstudio.com/api/references/contribution-points#contributes.configuration)
提供将向用户公开的设置。用户将能够在 Settings （设置） 编辑器中或通过直接编辑 settings.json 文件来设置这些配置选项。

您的配置条目既可用于在 JSON 编辑器中编辑设置时提供智能感知，也可用于定义它们在设置 UI 中的显示方式。

| NAME       | TYPE | DESC                                                                                                                    |     |     |
| ---------- | ---- | ----------------------------------------------------------------------------------------------------------------------- | --- | --- |
| title      | 标题   | 类别的`标题` 1️⃣️是用于该类别的标题。                                                                                                  |     |     |
| properties | 配置   | `配置`对象中的 `properties` 2️⃣ 将形成一个字典，其中键是设置 ID，值提供有关设置的更多信息。尽管扩展可以包含多个类别的设置，但扩展的每个设置仍必须具有自己的唯一 ID。设置 ID 不能是另一个设置 ID 的完整前缀。 |     |     |
